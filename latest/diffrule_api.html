<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>diffrule API · DiffBase</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>DiffBase</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Introduction</a></li><li><a class="toctext" href="diffresult_api.html">DiffResult API</a></li><li class="current"><a class="toctext" href="diffrule_api.html">diffrule API</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="diffrule_api.html">diffrule API</a></li></ul><a class="edit-page" href="https://github.com/JuliaDiff/DiffBase.jl/tree/6324ee9bd653f4717af9a13fd806fe486e5c5401/docs/src/diffrule_api.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>diffrule API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="diffrule-API-1" href="#diffrule-API-1"><code>diffrule</code> API</a></h1><p>Many differentiation methods rely on the notion of &quot;primitive&quot; definitions that comprise &quot;building blocks&quot; that can be composed via various formulations of the chain rule.</p><p>To facilitate the definition and use of such rules, DiffBase provides the <code>diffrule</code> API. These methods  allows you to define derivative rules, query which rules exist, and symbolically apply the rules to function call expressions.</p><p>The complete list of differentiation rules defined by DiffBase can be found in <a href="https://github.com/JuliaDiff/DiffBase.jl/blob/master/src/rules.jl"><code>DiffBase/src/rules.jl</code></a>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiffBase.@define_diffrule" href="#DiffBase.@define_diffrule"><code>DiffBase.@define_diffrule</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@define_diffrule f(x) = :(df_dx($x))
@define_diffrule f(x, y) = :(df_dx($x, $y)), :(df_dy($x, $y))
⋮</code></pre><p>Define a new differentiation rule for the function <code>f</code> and the given arguments, which should be treated as bindings to Julia expressions.</p><p>The RHS should be a function call with a non-splatted argument list, and the LHS should be the derivative expression, or in the <code>n</code>-ary case, an <code>n</code>-tuple of expressions where the <code>i</code>th expression is the derivative of <code>f</code> w.r.t the <code>i</code>th argument. Arguments should be interpolated wherever they are used on the RHS.</p><p>Note that differentiation rules are purely symbolic, so no type annotations should be used.</p><p>Examples:</p><pre><code class="language-none">@define_diffrule cos(x)          = :(-sin($x))
@define_diffrule /(x, y)         = :(inv($y)), :(-$x / ($y^2))
@define_diffrule polygamma(m, x) = :NaN,       :(polygamma($m + 1, $x))</code></pre></div><a class="source-link" target="_blank" href="https://github.com/JuliaDiff/DiffBase.jl/tree/6324ee9bd653f4717af9a13fd806fe486e5c5401/src/rules.jl#L7-L28">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiffBase.diffrule" href="#DiffBase.diffrule"><code>DiffBase.diffrule</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">diffrule(f::Symbol, args...)</code></pre><p>Return the derivative expression for <code>f</code> at the given argument(s), with the argument(s) interpolated into the returned expression.</p><p>In the <code>n</code>-ary case, an <code>n</code>-tuple of expressions will be returned where the <code>i</code>th expression is the derivative of <code>f</code> w.r.t the <code>i</code>th argument.</p><p>Examples:</p><pre><code class="language-none">julia&gt; DiffBase.diffrule(:sin, 1)
:(cos(1))

julia&gt; DiffBase.diffrule(:sin, :x)
:(cos(x))

julia&gt; DiffBase.diffrule(:sin, :(x * y^2))
:(cos(x * y ^ 2))

julia&gt; DiffBase.diffrule(:^, :(x + 2), :c)
(:(c * (x + 2) ^ (c - 1)), :((x + 2) ^ c * log(x + 2)))</code></pre></div><a class="source-link" target="_blank" href="https://github.com/JuliaDiff/DiffBase.jl/tree/6324ee9bd653f4717af9a13fd806fe486e5c5401/src/rules.jl#L42-L64">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiffBase.hasdiffrule" href="#DiffBase.hasdiffrule"><code>DiffBase.hasdiffrule</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">hasdiffrule(f::Symbol, arity::Int)</code></pre><p>Return <code>true</code> if a differentiation rule is defined for <code>f</code> and <code>arity</code>, or return <code>false</code> otherwise.</p><p>Here, <code>arity</code> refers to the number of arguments accepted by <code>f</code>.</p><p>Examples:</p><pre><code class="language-none">julia&gt; DiffBase.hasdiffrule(:sin, 1)
true

julia&gt; DiffBase.hasdiffrule(:sin, 2)
false

julia&gt; DiffBase.hasdiffrule(:-, 1)
true

julia&gt; DiffBase.hasdiffrule(:-, 2)
true

julia&gt; DiffBase.hasdiffrule(:-, 3)
false</code></pre></div><a class="source-link" target="_blank" href="https://github.com/JuliaDiff/DiffBase.jl/tree/6324ee9bd653f4717af9a13fd806fe486e5c5401/src/rules.jl#L67-L91">source</a><br/></section><footer><hr/><a class="previous" href="diffresult_api.html"><span class="direction">Previous</span><span class="title">DiffResult API</span></a></footer></article></body></html>
